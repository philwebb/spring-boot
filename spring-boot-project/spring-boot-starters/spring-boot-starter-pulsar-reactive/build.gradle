plugins {
	id "org.springframework.boot.starter"
}

description = "Starter for using Spring for Apache Pulsar Reactive"

dependencies {
	api(project(":spring-boot-project:spring-boot-starters:spring-boot-starter"))
	api("io.projectreactor:reactor-core")
	api("org.springframework.pulsar:spring-pulsar-reactive")
}

checkRuntimeClasspathForConflicts {
	// pulsar bouncycastle ext includes duplicate bouncycastle classes
	ignore { name -> name.startsWith("org/bouncycastle/") }

	// spring-pulsar also shades/relocates caffeine to the same location
	ignore { name -> name.startsWith("org/springframework/pulsar/shade/com/github/benmanes/caffeine/") }
	ignore { name -> name.startsWith("org/springframework/pulsar/shade/com/google/errorprone/") }
	ignore { name -> name.startsWith("org/springframework/pulsar/shade/org/checkerframework/") }

	// pulsar-client-all/pulsar-client-api/pulsar-client-admin-api/pulsar-package-core libs have common package name and include package-info
	ignore { name -> name.matches("^org\\/apache\\/pulsar\\/.*\\/package-info.class\$") }

	// pulsar-client-all/pulsar-client-api/pulsar-package-core libs all have a findbugsExclude.xml
	ignore { name -> name.equals("findbugsExclude.xml") }
}
